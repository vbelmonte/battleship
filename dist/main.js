(()=>{"use strict";function t(){let t=function(){let t=function(){let t=[];for(let e=0;e<10;e+=1){t[e]=[];for(let n=0;n<10;n+=1)t[e][n]=null}return t}(),e=[];const n=function(){let t=[];for(let e=0;e<10;e+=1){t[e]=[];for(let n=0;n<10;n+=1)t[e][n]=!0}return t}();return{getGrid:()=>t,placeShip:(e,n,o,r)=>{const i=o.getShipLength();if("horizontal"===r){let r=i+e;for(let i=e;i<r;i+=1)t[n][i]=o}else{let r=i+n;for(let i=n;i<r;i+=1)t[i][e]=o}},receiveAttack:(o,r)=>{if(!0===n[o][r]){if(n[o][r]=!1,null!==t[o][r]){let n=t[o][r];return n.hit(),(t=>{t.isSunk()&&e.push(t)})(n),!0}return!1}return"square already hit!"},getSunkShips:()=>e,checkAllShipsSunk:()=>10===e.length,getAvailableSquares:()=>n}}(),e=!1;return{getGameBoard:()=>t,setTurn:t=>{e=t},getTurn:()=>e,receiveAttack:(e,n)=>t.receiveAttack(e,n)}}function e(t){let e=t,n=0,o=!1;return{hit:()=>{n++,e===n&&(o=!0)},getShipLength:()=>e,getHits:()=>n,isSunk:()=>e===n}}function n(t){!0===function(t){const e=function(t){const e=t.split("-")[1];return[e%10,Math.floor(e/10)]}(t.target.id),n=e[0],o=e[1];return!0===c.receiveAttack(n,o)?(console.log("hit!"),!0):(console.log("miss!"),!1)}(t)?t.target.classList.add("hit"):t.target.classList.add("miss"),t.target.removeEventListener("click",n)}function o(t,e,n,o,r){const i=function(t,e){const n=document.createElement("div");if(n.classList.add("ship-cell"),"horizontal"===e){const e=2.1875*t+.125*(t-1);n.style.width=e+"rem",n.style.height="2.1875rem"}else{const e=2.1875*t+.125*(t-1);n.style.height=e+"rem"}return n.style.outline="solid 2px var(--blue)",n}(n.getShipLength(),o),l=10*e+t;document.getElementById(r+"-"+l).appendChild(i)}const r=new t,i=new t,l=r.getGameBoard(),c=i.getGameBoard();function a(t,e,n,o){return"horizontal"===o?n+t<10:n+e<10}function s(t,e,n,o,r){if("horizontal"===o){let o=t;for(;o<t+n;){if(null!==r.getGrid()[e][o])return!1;o++}return!0}{let o=e;for(;o<e+n;){if(null!==r.getGrid()[o][t]||void 0===r.getGrid()[o][t])return!1;o++}return!0}}!function(t){const e=document.getElementById(t+"-board");for(let o=0;o<100;o++){const r=document.createElement("div"),i=o;r.classList.add("cell"),r.id=t+"-"+i.toString(),r.addEventListener("click",n),e.appendChild(r)}}("computer"),function(t){const e=document.getElementById("p1-board");for(let t=0;t<100;t++){const n=document.createElement("div"),o=t;n.classList.add("cell"),n.id="p1-"+o.toString(),e.appendChild(n)}}(),function(t,n){!function(t,e,n){const r=["horizontal","vertical"];let i=0;for(;i<t.length;){const n=Math.floor(10*Math.random()),l=Math.floor(10*Math.random()),c=r[Math.floor(2*Math.random())];a(n,l,t[i].getShipLength(),c)&&s(n,l,t[i].getShipLength(),c,e)&&(e.placeShip(n,l,t[i],c),o(n,l,t[i],c,"p1"),i++)}console.log(e.getGrid())}([new e(5),new e(4),new e(3),new e(3),new e(2)],t),function(t,e,n){const o=["horizontal","vertical"];let r=0;for(;r<t.length;){const n=Math.floor(10*Math.random()),i=Math.floor(10*Math.random()),l=o[Math.floor(2*Math.random())];a(n,i,t[r].getShipLength(),l)&&s(n,i,t[r].getShipLength(),l,e)&&(e.placeShip(n,i,t[r],l),r++)}}([new e(5),new e(4),new e(3),new e(3),new e(2)],n)}(l,c)})();