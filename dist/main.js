(()=>{"use strict";function t(){let t=function(){let t=function(){let t=[];for(let e=0;e<10;e+=1){t[e]=[];for(let n=0;n<10;n+=1)t[e][n]=null}return t}(),e=[];const n=function(){let t=[];for(let e=0;e<10;e+=1){t[e]=[];for(let n=0;n<10;n+=1)t[e][n]=!0}return t}();return{getGrid:()=>t,placeShip:(e,n,o,r)=>{console.log("x: "+e),console.log("y: "+n);const l=o.getShipLength();if("horizontal"===r){let r=l+e;for(let l=e;l<r;l+=1)t[n][l]=o}else{let r=l+n;for(let l=n;l<r;l+=1)t[l][e]=o}},receiveAttack:(o,r)=>{if(!0===n[o][r]){if(n[o][r]=!1,null!==t[o][r]){let n=t[o][r];return n.hit(),(t=>{t.isSunk()&&e.push(t)})(n),!0}return!1}return"square already hit!"},getSunkShips:()=>e,checkAllShipsSunk:()=>10===e.length,getAvailableSquares:()=>n}}(),e=!1;return{getGameBoard:()=>t,setTurn:t=>{e=t},getTurn:()=>e,receiveAttack:(e,n)=>t.receiveAttack(e,n)}}function e(t){let e=t,n=0,o=!1;return{hit:()=>{n++,e===n&&(o=!0)},getShipLength:()=>e,getHits:()=>n,isSunk:()=>e===n}}function n(t){const e=document.getElementById(t+"-board");for(let n=0;n<100;n++){const o=document.createElement("div"),r=n;o.classList.add("cell"),o.id=t+"-"+r.toString(),e.appendChild(o)}}function o(t,e,n,o,r){const l=function(t,e,n,o){const r=document.createElement("div");return r.classList.add("ship","ship-span"),"horizontal"===o?(r.style.gridTemplateColumns="repeat("+n+", 1fr)",r.style.gridColumn=t+1+" / span "+n):(r.style.gridTemplateRows="repeat("+n+", 1fr)",r.style.gridColumn=t+1,r.style.gridRow=e+1+" / span "+n),r}(t,e,n,r);for(let t=0;t<o.length;t+=1)l.appendChild(o[t]);return l}function r(t,e,n,r,l){const i=document.getElementById(l+"-board"),s=[],c=n.getShipLength();if("horizontal"===r){const n=t+10*e,u=c+n;for(let t=n;t<u;t+=1)i.childNodes[t+1].classList.add("ship-cell"),s.push(i.childNodes[t+1]);const a=o(t,e,c,s,r),d=document.getElementById(l+"-"+u);i.insertBefore(a,d)}else{const n=c,u=t+10*e,a=u+1;for(let t=0;t<n;t+=1)i.childNodes[u+1+10*t].classList.add("ship-cell"),s.push(i.childNodes[u+1+10*t]);const d=o(t,e,c,s,r),h=document.getElementById(l+"-"+a);i.insertBefore(d,h)}}function l(t,e,n,o){return"horizontal"===o?n+t<10:n+e<10}function i(t,e,n,o,r){if("horizontal"===o){let o=t;for(;o<t+n;){if(null!==r.getGrid()[o][e])return!1;o++}return!0}{let o=e;for(;o<e+n;){if(null!==r.getGrid()[t][o])return!1;o++}return!0}}!function(){const o=new t,s=new t,c=o.getGameBoard();s.getGameBoard(),n("computer"),n("p1"),function(t,n){const o=new e(5),s=new e(4);new e(3),new e(3),new e(2),function(t,e,n){const o=["horizontal","vertical"];let s=0;for(;s<t.length;){const n=Math.floor(10*Math.random()),c=Math.floor(10*Math.random()),u=o[Math.floor(2*Math.random())];l(n,c,t[s].getShipLength(),u)&&i(n,c,t[s].getShipLength(),u,e)&&(e.placeShip(n,c,t[s],u),r(n,c,t[s],u,"p1"),s++)}}([o,s],t)}(c)}()})();