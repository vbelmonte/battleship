(()=>{"use strict";function e(e){let t=e,n=0,r=!1;return{hit:()=>{n++,t===n&&(r=!0)},getShipLength:()=>t,getHits:()=>n,isSunk:()=>t===n}}function t(){let t=function(){let t=function(){let e=[];for(let t=0;t<10;t+=1){e[t]=[];for(let n=0;n<10;n+=1)e[t][n]=null}return e}(),n=[];const r=function(){let e=[];for(let t=0;t<10;t+=1){e[t]=[];for(let n=0;n<10;n+=1)e[t][n]=!0}return e}();return{getGrid:()=>t,placeShip:(n,r,l,i)=>{const o=e(l);if("horizontal"===i){let e=l+r;for(let l=n;l<e;l+=1)t[l][r]=o}else{let e=l+r;for(let l=r;l<e;l+=1)t[n][l]=o}},receiveAttack:(e,l)=>{if(!0===r[e][l]){if(r[e][l]=!1,null!==t[e][l]){let r=t[e][l];return r.hit(),(e=>{e.isSunk()&&n.push(e)})(r),!0}return!1}return"square already hit!"},getSunkShips:()=>n,checkAllShipsSunk:()=>10===n.length,getAvailableSquares:()=>r}}(),n=!1;return{getGameBoard:()=>t,setTurn:e=>{n=e},getTurn:()=>n,receiveAttack:(e,n)=>t.receiveAttack(e,n)}}function n(e){const t=document.getElementById(e+"-board");for(let n=0;n<100;n++){const r=document.createElement("div"),l=n;r.classList.add("cell"),r.id=e+"-"+l.toString(),t.appendChild(r)}}function r(e,t,n,r,l){const i=function(e,t,n,r){const l=document.createElement("div");return l.classList.add("ship","ship-span"),"horizontal"===r?(l.style.gridTemplateColumns="repeat("+n+", 1fr)",l.style.gridColumn=e+1+" / span "+n):(l.style.gridTemplateRows="repeat("+n+", 1fr)",l.style.gridColumn=e+1,l.style.gridRow=t+1+" / span "+n),l}(e,t,n,l);for(let e=0;e<r.length;e+=1)i.appendChild(r[e]);return i}!function(){const l=new t,i=(new t,new e(5));n("computer"),n("p1");const o=(l.getGameBoard().placeShip(1,1,5,"vertical"),[1,1]);!function(e,t,n,l,i){const o=document.getElementById("p1-board"),c=[],s=n.getShipLength();{const n=s,i=e+10*t,u=i+1;for(let e=0;e<n;e+=1)o.childNodes[i+1+10*e].classList.add("ship-cell"),c.push(o.childNodes[i+1+10*e]);const a=r(e,t,s,c,l),d=document.getElementById("p1-"+u);o.insertBefore(a,d)}}(o[0],o[1],i,"vertical")}()})();